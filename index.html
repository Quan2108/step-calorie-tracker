<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fitness Monitor</title>
</head>
<body>
  <h1>Fitness Monitor</h1>
  <button id="connect">Connect to Device</button>
  <p id="status">Status: Disconnected</p>
  <p id="stepCount">Steps: 0</p>
  <p id="distance">Distance: 0 km</p>
  <p id="calories">Calories Burned: 0 kcal</p>

  <script>
    const connectButton = document.getElementById('connect');
    const statusElement = document.getElementById('status');
    const stepCountElement = document.getElementById('stepCount');
    const distanceElement = document.getElementById('distance');
    const caloriesElement = document.getElementById('calories');

    connectButton.addEventListener('click', async () => {
      try {
        statusElement.textContent = 'Status: Connecting...';

        // Request the device
        const device = await navigator.bluetooth.requestDevice({
          filters: [{ services: ['19B10000-E8F2-537E-4F6C-D104768A1214'] }]
        });

        // Connect to the device
        const server = await device.gatt.connect();

        // Get the service
        const service = await server.getPrimaryService('19B10000-E8F2-537E-4F6C-D104768A1214');

        // Get the characteristics
        const stepCountChar = await service.getCharacteristic('19B10001-E8F2-537E-4F6C-D104768A1215');
        const distanceChar = await service.getCharacteristic('19B10002-E8F2-537E-4F6C-D104768A1216');
        const caloriesChar = await service.getCharacteristic('19B10003-E8F2-537E-4F6C-D104768A1217');

        // Read the values
        const stepCountValue = await stepCountChar.readValue();
        const distanceValue = await distanceChar.readValue();
        const caloriesValue = await caloriesChar.readValue();

        // Update the UI
        stepCountElement.textContent = `Steps: ${stepCountValue.getUint32(0)}`;
        distanceElement.textContent = `Distance: ${(distanceValue.getFloat32(0) / 1000).toFixed(2)} km`;
        caloriesElement.textContent = `Calories Burned: ${caloriesValue.getFloat32(0).toFixed(2)} kcal`;

        statusElement.textContent = 'Status: Connected';
      } catch (error) {
        console.error('Error:', error);
        statusElement.textContent = 'Status: Error connecting to device';
      }
    });
  </script>
</body>
</html>
